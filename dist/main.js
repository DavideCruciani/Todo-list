(()=>{"use strict";function e(){document.querySelector(".overlay").classList.remove("active"),document.querySelector(".modal").classList.remove("active"),document.querySelector("#miss").textContent="";const e=document.getElementById("tname"),t=document.getElementById("tdesc"),n=document.getElementById("tpty"),a=document.getElementById("ddate");e.value="",t.value="",n.value="",a.value=""}document.getElementById("create-task-button").addEventListener("click",(function(){const t=document.querySelector(".overlay");t.classList.add("active"),document.querySelector(".modal").classList.add("active"),t.addEventListener("click",e)}));let t=[];class n{constructor(e,t,n,a){this.name=e,this.description=t,this.priority=n,this.dueDate=a}}function a(e,a,l,o){let d=new n(e,a,l,o);t.push(d),localStorage.setItem("tasks",JSON.stringify(t)),s(d)}function s(n){const a=document.createElement("div");a.classList.add("task"),"Low"==n.priority?a.classList.add("low"):"Medium"==n.priority?a.classList.add("medium"):a.classList.add("high"),document.getElementById("content-holder").appendChild(a);const s=document.createElement("div");s.classList.add("taskCntDivider"),a.appendChild(s);const d=document.createElement("p");s.appendChild(d),d.innerText=n.name;const m=document.createElement("p");m.classList.add("DueDate"),s.appendChild(m),m.innerText=n.dueDate;const r=document.createElement("div");a.appendChild(r),r.classList.add("taskCntDivider2");const u=document.createElement("button");r.appendChild(u),u.classList.add("tickButton"),u.addEventListener("click",l),"check"==n.tick&&(u.classList.add("activeTickButton"),d.classList.add("line-through"),u.innerText="✔");const v=document.createElement("button");r.appendChild(v),v.innerText="Info",v.classList.add("taskBtns"),v.setAttribute("id","infoBtn"),v.addEventListener("click",o);const y=document.createElement("button");r.appendChild(y),y.innerText="Remove",y.classList.add("taskBtns"),y.setAttribute("id","removeBtn"),y.addEventListener("click",c);const g=document.createElement("button");r.appendChild(g),g.innerText="Modify",g.classList.add("taskBtns"),g.setAttribute("id","modifyBtn"),g.addEventListener("click",i);const E=document.getElementById("tname"),f=document.getElementById("tdesc"),k=document.getElementById("tpty"),B=document.getElementById("ddate");E.value="",f.value="",k.value="",B.value="",g.addEventListener("click",i),e(),console.log(t)}function l(e){const n=e.target.parentElement.parentElement.firstChild.firstChild,a=e.target.parentElement.parentElement.firstChild.firstChild.textContent,s=t.find((e=>e.name===a)),l=e.target;l.classList.contains("activeTickButton")?(l.classList.remove("activeTickButton"),l.innerText="",n.classList.remove("line-through"),s.tick="",localStorage.setItem("tasks",JSON.stringify(t))):(l.classList.add("activeTickButton"),l.innerText="✔",n.classList.add("line-through"),s.tick="check",localStorage.setItem("tasks",JSON.stringify(t)))}function o(e){const n=e.target.parentElement.parentElement.firstChild.firstChild.textContent,a=t.find((e=>e.name===n)),s=document.querySelector(".overlay3"),l=document.querySelector(".modal3");s.classList.add("active"),l.classList.add("active");const o=document.getElementById("tname3"),c=document.getElementById("tdesc3"),i=document.getElementById("tpty3"),m=document.getElementById("ddate3");o.textContent=a.name,c.textContent=a.description,i.textContent=a.priority,m.textContent=a.dueDate,document.querySelector("#addButton3").addEventListener("click",d)}function d(){document.querySelector(".overlay3").classList.remove("active"),document.querySelector(".modal3").classList.remove("active")}function c(e){const n=e.target.parentElement.parentElement,a=e.target.parentElement.parentElement.firstChild.firstChild.textContent;for(let e=0;e<t.length;e++)t[e].name==a&&t.splice(e,1);localStorage.setItem("tasks",JSON.stringify(t)),n.remove()}function i(e){e.preventDefault();const n=e.target.parentElement.parentElement.firstChild.firstChild.textContent,a=e.target.parentElement.parentElement,s=t.find((e=>e.name===n)),l=document.querySelector(".overlay2"),o=document.querySelector(".modal2");l.classList.add("active"),o.classList.add("active");const d=document.getElementById("tname2"),c=document.getElementById("tdesc2"),i=document.getElementById("tpty2"),r=document.getElementById("ddate2"),u=s.name;d.value=s.name,c.value=s.description,i.value=s.priority,r.value=s.dueDate;const v=document.querySelector("#addButton2");v.addEventListener("click",function(e,n){for(let e=0;e<t.length;e++)t[e].name==n&&t.splice(e,1);localStorage.setItem("tasks",JSON.stringify(t)),e.remove()}(a,u)),v.addEventListener("click",m)}const m=e=>{e.preventDefault();const n=document.getElementById("tname2"),s=document.getElementById("tdesc2"),l=document.getElementById("tpty2"),o=document.getElementById("ddate2");if(""!==n.value&&""!==s.value&&""!==l.value&&""!==o.value&&void 0===t.find((e=>e.name===n.value))){a(document.getElementById("tname2").value,document.getElementById("tdesc2").value,document.getElementById("tpty2").value,document.getElementById("ddate2").value);const e=document.querySelector(".overlay2"),t=document.querySelector(".modal2");e.classList.remove("active"),t.classList.remove("active")}else if(t.find((e=>e.name===n.value)))return void(document.querySelector("#miss2").textContent="You already have a Task with this name")};function r(){document.getElementById("all-tasks-button").classList.add("active-nav-button"),document.getElementById("week-tasks-button").classList.remove("active-nav-button"),document.getElementById("today-tasks-button").classList.remove("active-nav-button");const e=localStorage.getItem("tasks");t=JSON.parse(e),t.forEach((e=>function(e){let t=document.getElementsByClassName("task");for(let n of t){let t=n.getElementsByClassName("taskCntDivider");for(let a of t){let t=a.getElementsByTagName("p");for(let a of t)if(a.textContent===e.name){n.classList.remove("hiddenTask"),n.classList.add("shownTask");break}}}}(e)))}document.getElementById("addButton").addEventListener("click",(e=>{e.preventDefault();const n=document.getElementById("tname"),s=document.getElementById("tdesc"),l=document.getElementById("tpty"),o=document.getElementById("ddate");if(""!==n.value&&""!==s.value&&""!==l.value&&""!==o.value&&void 0===t.find((e=>e.name===n.value)))a(document.getElementById("tname").value,document.getElementById("tdesc").value,document.getElementById("tpty").value,document.getElementById("ddate").value);else if(t.find((e=>e.name===n.value)))return void(document.querySelector("#miss").textContent="You already have a Task with this name")})),window.onload=function(){null===localStorage.getItem("pageLoaded")&&(a("Compiti Italiano","Dante pg256","High","2023-01-31"),a("Compiti Matematica","Frazioni pg456","Medium","2023-01-31"),localStorage.setItem("pageLoaded",!0))};const u=localStorage.getItem("tasks");u&&(t=JSON.parse(u),t.forEach((e=>s(e)))),r(),document.getElementById("button").addEventListener("click",(function(){const e=document.querySelector("nav");"none"!=e.style.display?e.style.display="none":e.style.display="inline"})),document.getElementById("all-tasks-button").addEventListener("click",r),document.getElementById("today-tasks-button").addEventListener("click",(function(){document.getElementById("today-tasks-button").classList.add("active-nav-button"),document.getElementById("week-tasks-button").classList.remove("active-nav-button"),document.getElementById("all-tasks-button").classList.remove("active-nav-button");const e=localStorage.getItem("tasks");t=JSON.parse(e),t.forEach((e=>function(e){const t=new Date;let n=t.getDate(),a=t.getMonth()+1,s=t.getFullYear();var l=`${s}-0${a}-${n}`;if(a>9&&(l=`${s}-${a}-${n}`),e.dueDate==l){let t=document.getElementsByClassName("task");for(let n of t){let t=n.getElementsByClassName("taskCntDivider");for(let a of t){let t=a.getElementsByTagName("p");for(let a of t)if(a.textContent===e.name){n.classList.add("shownTask");break}}}}else{let t=document.getElementsByClassName("task");for(let n of t){let t=n.getElementsByClassName("taskCntDivider");for(let a of t){let t=a.getElementsByTagName("p");for(let a of t)if(a.textContent===e.name){n.classList.remove("shownTask"),n.classList.add("hiddenTask");break}}}}}(e)))})),document.getElementById("week-tasks-button").addEventListener("click",(function(){document.getElementById("week-tasks-button").classList.add("active-nav-button"),document.getElementById("today-tasks-button").classList.remove("active-nav-button"),document.getElementById("all-tasks-button").classList.remove("active-nav-button");const e=localStorage.getItem("tasks");t=JSON.parse(e),t.forEach((e=>function(e){const t=new Date;let n=t.getDate(),a=n+8,s=t.getMonth()+1,l=t.getFullYear();var o=`${l}-0${s}-${n}`;let d=e.dueDate.slice(-2),c=e.dueDate.slice(5,-3),i=e.dueDate.slice(0,-6);if(s>9)if(e.dueDate==o||i==l&&c==s&&a>d&&d>n||i==l&&c==s&&n+7>=d>n){let t=document.getElementsByClassName("task");for(let n of t){let t=n.getElementsByClassName("taskCntDivider");for(let a of t){let t=a.getElementsByTagName("p");for(let a of t)if(a.textContent===e.name){n.classList.add("shownTask");break}}}}else{let t=document.getElementsByClassName("task");for(let n of t){let t=n.getElementsByClassName("taskCntDivider");for(let a of t){let t=a.getElementsByTagName("p");for(let a of t)if(a.textContent===e.name){n.classList.remove("shownTask"),n.classList.add("hiddenTask");break}}}}else if(e.dueDate==o||i==l&&c==`0${s}`&&a>d&&d>n||i==l&&c==s&&n+7>=d>n){let t=document.getElementsByClassName("task");for(let n of t){let t=n.getElementsByClassName("taskCntDivider");for(let a of t){let t=a.getElementsByTagName("p");for(let a of t)if(a.textContent===e.name){n.classList.add("shownTask");break}}}}else{let t=document.getElementsByClassName("task");for(let n of t){let t=n.getElementsByClassName("taskCntDivider");for(let a of t){let t=a.getElementsByTagName("p");for(let a of t)if(a.textContent===e.name){n.classList.remove("shownTask"),n.classList.add("hiddenTask");break}}}}}(e)))}))})();